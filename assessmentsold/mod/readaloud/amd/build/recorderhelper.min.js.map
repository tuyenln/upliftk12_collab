{"version":3,"sources":["../src/recorderhelper.js"],"names":["define","$","log","cloudpoodll","debug","status","init","opts","on_recording_start","on_recording_end","on_audio_processing","on_speech","that","message","type","action","startbuttonclick","stopbuttonclick","alert"],"mappings":"AAAAA,OAAM,gCAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,iCAAvB,CAAD,CAA4D,SAAUC,CAAV,CAAaC,CAAb,CAAkBC,CAAlB,CAA+B,CAC7F,aAKAD,CAAG,CAACE,KAAJ,CAAU,gCAAV,EAEA,MAAO,CAEHC,MAAM,CAAE,SAFL,CAIHC,IAAI,CAAE,cAAUC,CAAV,CAAgBC,CAAhB,CACUC,CADV,CAEUC,CAFV,CAGUC,CAHV,CAGqB,CAEvB,GAAIC,CAAAA,CAAI,CAAG,IAAX,CACAT,CAAW,CAACG,IAAZ,CAAiBC,CAAI,WAArB,CAEI,SAAUM,CAAV,CAAmB,CAEf,OAAQA,CAAO,CAACC,IAAhB,EACI,IAAK,WAAL,CACI,GAAuB,SAAnB,GAAAD,CAAO,CAACE,MAAZ,CAAkC,CAC9BH,CAAI,CAACI,gBAAL,GACAR,CAAkB,CAACK,CAAD,CAErB,CAJD,IAIO,IAAuB,SAAnB,GAAAA,CAAO,CAACE,MAAZ,CAAkC,CACrCH,CAAI,CAACK,eAAL,GACAR,CAAgB,CAACI,CAAD,CACnB,CACD,MACJ,IAAK,oBAAL,CAEI,GAAoB,QAAhB,GAAAD,CAAI,CAACP,MAAT,CAA8B,CAC1BK,CAAmB,CAACG,CAAD,CACtB,CACDD,CAAI,CAACP,MAAL,CAAc,QAAd,CACA,MACJ,IAAK,QAAL,CACQM,CAAS,CAACE,CAAD,CAAT,CACJ,MACJ,IAAK,OAAL,CACIK,KAAK,CAAC,WAAaL,CAAO,CAACA,OAAtB,CAAL,CACA,MAvBR,CAyBH,CA7BL,CA+BH,CAzCE,CA0CHI,eAAe,CAAE,0BAAY,CACzB,KAAKZ,MAAL,CAAc,SAEjB,CA7CE,CA8CHW,gBAAgB,CAAE,2BAAY,CAC1B,KAAKX,MAAL,CAAc,SAEjB,CAjDE,CAoDV,CA5DK,CAAN","sourcesContent":["define(['jquery', 'core/log', 'mod_readaloud/cloudpoodllloader'], function ($, log, cloudpoodll) {\n    \"use strict\"; // jshint ;_;\n    /*\n    This file sets up the cloud poodll recorder and passes on events to registered handlers\n     */\n\n    log.debug('Readaloud helper: initialising');\n\n    return {\n\n        status: 'stopped',\n\n        init: function (opts, on_recording_start,\n                        on_recording_end,\n                        on_audio_processing,\n                        on_speech) {\n\n            var that = this;\n            cloudpoodll.init(opts['recorderid'],\n\n                function (message) {\n                    //console.log(message);\n                    switch (message.type) {\n                        case 'recording':\n                            if (message.action === 'started') {\n                                that.startbuttonclick();\n                                on_recording_start(message);\n\n                            } else if (message.action === 'stopped') {\n                                that.stopbuttonclick();\n                                on_recording_end(message);\n                            }\n                            break;\n                        case 'awaitingprocessing':\n                            //awaitingprocessing fires often, but we only want to post once\n                            if (that.status !== 'posted') {\n                                on_audio_processing(message);\n                            }\n                            that.status = 'posted';\n                            break;\n                        case 'speech':\n                                on_speech(message);\n                            break;\n                        case 'error':\n                            alert('PROBLEM:' + message.message);\n                            break;\n                    }\n                }\n            );\n        },\n        stopbuttonclick: function () {\n            this.status = 'stopped';\n            //do something\n        },\n        startbuttonclick: function () {\n            this.status = 'started';\n            //do something\n        }\n\n    };//end of return value\n});"],"file":"recorderhelper.min.js"}